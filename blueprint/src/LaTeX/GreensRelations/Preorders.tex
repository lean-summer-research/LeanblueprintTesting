% This file is included by both the web and print versions of the blueprint
% via an import statment in blueprint/scr/content.tex 
% === Replace the separate refl/trans/isPreorder lemmas with the combined entries below ===

\begin{definition}[Green's R-preorder]
\label{def:RRel}
Let \(M\) be a monoid and let \(x,y\in M\).  We define
\(x \le_{\mathcal R} y\) if there exists \(z\in M\) such that \(x = y\cdot z\).
Equivalently, \(x\) lies in the principal right ideal generated by \(y\).
% Lists the Lean declarations corresponding to this definition
\lean{RRel}
% Marks that the surrounding environment is completely formalised in Lean
\leanok
\end{definition}

\begin{definition}[Green's L-preorder]
\label{def:LRel}
Let \(M\) be a monoid and let \(x,y\in M\).  We define
\(x \le_{\mathcal L} y\) if there exists \(z\in M\) such that \(x = z\cdot y\).
In other words, \(x\) lies in the principal left ideal generated by \(y\).
\lean{LRel}
\leanok
\end{definition}

\begin{definition}[Green's J-preorder]
\label{def:JRel}
Let \(M\) be a monoid and let \(x,y\in M\).  We define
\(x \le_{\mathcal J} y\) if there exist \(u,v\in M\) such that \(x = u\cdot y\cdot v\).
Equivalently, \(x\) lies in the twoâ€‘sided ideal generated by \(y\).
\lean{JRel}
\leanok
\end{definition}

\begin{definition}[Green's H-preorder]
\label{def:HRel}
Let \(M\) be a monoid and let \(x,y\in M\).  We define
\(x \le_{\mathcal H} y\) if both \(x \le_{\mathcal R} y\) and \(x \le_{\mathcal L} y\) hold, that is,
\(x\) is simultaneously in the right and left ideals generated by \(y\).
Unwinding the definition, this means there exist elements \(z_1,z_2\in M\)
with \(x = y\cdot z_1\) and \(x = z_2\cdot y\).
\lean{HRel}
\leanok
\end{definition}

\begin{lemma}[\(\le_{\mathcal R}\) is a preorder (reflexive \& transitive)]
\label{lem:RRel-preorder}
The relation \(\le_{\mathcal R}\) on \(M\) is a preorder; in particular:
\begin{itemize}
  \item \textbf{Reflexivity.} For every \(x\in M\), \(x \le_{\mathcal R} x\) (witness \(z=1\) since \(x = x\cdot 1\)).
  \item \textbf{Transitivity.} If \(x \le_{\mathcal R} y\) and \(y \le_{\mathcal R} z\), pick witnesses \(v,u\in M\) with \(x = yv\) and \(y = zu\); then \(x = z(uv)\), so \(x \le_{\mathcal R} z\).
\end{itemize}
\lean{RRel.refl, RRel.trans, RRel.isPreorder}
\leanok
\uses{def:RRel}
\end{lemma}

\begin{lemma}[\(\le_{\mathcal L}\) is a preorder (reflexive \& transitive)]
\label{lem:LRel-preorder}
The relation \(\le_{\mathcal L}\) on \(M\) is a preorder; in particular:
\begin{itemize}
  \item \textbf{Reflexivity.} For every \(x\in M\), \(x \le_{\mathcal L} x\) (witness \(z=1\) since \(1\cdot x = x\)).
  \item \textbf{Transitivity.} If \(x \le_{\mathcal L} y\) and \(y \le_{\mathcal L} z\), pick witnesses \(u,v\in M\) with \(x = u y\) and \(y = v z\); then \(x = (uv) z\), so \(x \le_{\mathcal L} z\).
\end{itemize}
\lean{LRel.refl, LRel.trans, LRel.isPreorder}
\leanok
\uses{def:LRel}
\end{lemma}

\begin{lemma}[\(\le_{\mathcal J}\) is a preorder (reflexive \& transitive)]
\label{lem:JRel-preorder}
The relation \(\le_{\mathcal J}\) on \(M\) is a preorder; in particular:
\begin{itemize}
  \item \textbf{Reflexivity.} For every \(x\in M\), \(x \le_{\mathcal J} x\) (witness \(u=v=1\) so \(x=1\cdot x\cdot 1\)).
  \item \textbf{Transitivity.} If \(x \le_{\mathcal J} y\) and \(y \le_{\mathcal J} z\), pick \(u_1,v_1,u_2,v_2\in M\) with \(x = u_1 y v_1\) and \(y = u_2 z v_2\); then
        \(x = u_1 (u_2 z v_2) v_1 = (u_1 u_2) z (v_2 v_1)\), so \(x \le_{\mathcal J} z\).
\end{itemize}
\lean{JRel.refl, JRel.trans, JRel.isPreorder}
\leanok
\uses{def:JRel}
\end{lemma}

\begin{lemma}[\(\le_{\mathcal H}\) is a preorder (reflexive \& transitive)]
\label{lem:HRel-preorder}
The relation \(\le_{\mathcal H}\) on \(M\) is a preorder; in particular:
\begin{itemize}
  \item \textbf{Reflexivity.} For every \(x\in M\), \(x \le_{\mathcal H} x\) since \(x \le_{\mathcal R} x\) and \(x \le_{\mathcal L} x\).
  \item \textbf{Transitivity.} If \(x \le_{\mathcal H} y\) and \(y \le_{\mathcal H} z\), then \(x \le_{\mathcal R} y \le_{\mathcal R} z\) and \(x \le_{\mathcal L} y \le_{\mathcal L} z\); hence \(x \le_{\mathcal R} z\) and \(x \le_{\mathcal L} z\), so \(x \le_{\mathcal H} z\).
\end{itemize}
\lean{HRel.refl, HRel.trans, HRel.isPreorder}
\leanok
\uses{def:HRel, lem:RRel-preorder, lem:LRel-preorder}
\end{lemma}
